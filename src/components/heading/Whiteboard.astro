---
import { scope } from "simple:scope";
import markerRed from "./marker-red.svg?raw";
import markerBlue from "./marker-blue.svg?raw";
import markerGreen from "./marker-green.svg?raw";
---

<div
  data-whiteboard-container
  class="relative rotate-3 group-[[data-drawing]]:rotate-0 transition-transform duration-300"
>
  <canvas
    width="800"
    height="1200"
    data-target="my-whiteboard.canvas"
    class="absolute inset-11 top-[2.7rem] rounded-2xl"></canvas>
  <div
    class="group/markers opacity-30 group-[[data-drawing]]:opacity-100 transition-opacity absolute bottom-2 left-11 right-4 flex justify-center gap-2"
    data-action="click:my-whiteboard#startDrawing"
  >
    <label
      class="opacity-80 translate-y-0 has-checked:opacity-100 has-checked:-translate-y-1 transition-opacity transition-transform ease-spring-5 duration-700"
      set:html={markerRed}
    >
      <span class="sr-only">Red</span>
      <input class="sr-only" type="radio" value="red" name="color" />
    </label>
    <label
      set:html={markerBlue}
      class="opacity-80 translate-y-0 has-checked:opacity-100 has-checked:-translate-y-1 transition-opacity transition-transform ease-spring-5 duration-700"
    >
      <span class="sr-only">Blue</span>
      <input class="sr-only" type="radio" value="blue" name="color" />
    </label>
    <label
      set:html={markerGreen}
      class="opacity-80 translate-y-0 has-checked:opacity-100 has-checked:-translate-y-1 transition-opacity transition-transform ease-spring-5 duration-700"
    >
      <span class="sr-only">Green</span>
      <input class="sr-only" type="radio" value="green" name="color" />
    </label>
  </div>
  <svg
    width="400"
    height="600"
    viewBox="0 0 400 600"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <g filter="url(#filter0_dddd_222_3)">
      <rect
        x="34.7048"
        y="34.1074"
        width="356.747"
        height="530.61"
        rx="30"
        fill="#334155"></rect>
      <rect
        x="44.4192"
        y="42.8673"
        width="337.318"
        height="513.09"
        rx="20"
        fill="white"></rect>
      <rect
        x="44.4192"
        y="42.8673"
        width="337.318"
        height="513.09"
        rx="20"
        class="group-[[data-drawing]]:opacity-0 transition-opacity"
        fill="url(#paint0_linear_222_3)"></rect>
      <rect
        x="44.4192"
        y="42.8673"
        width="337.318"
        height="513.09"
        rx="20"
        fill="url(#paint1_radial_222_3)"
        fill-opacity="0.2"></rect>
      <g data-target="my-whiteboard.face">
        <path
          d="M158.262 319.189C168.246 330.416 185.183 338.872 211.569 338.872C237.955 338.872 254.892 330.416 264.876 319.189"
          stroke="#6200FF"
          stroke-width="25"
          stroke-linecap="round"></path>
        <rect
          data-targets="my-whiteboard.eyes"
          x="90.7898"
          y="201.2"
          width="20.5027"
          height="109.895"
          rx="10.2514"
          fill="#6200FF"></rect>
        <rect
          data-targets="my-whiteboard.eyes"
          x="307.299"
          y="201.2"
          width="20.5027"
          height="109.895"
          rx="10.2514"
          fill="#6200FF"></rect>
        <path
          clip-path={`url(#${scope("scribble-bounds")})`}
          data-target="my-whiteboard.scribble"
          d="M22.2191 30.6216C89.0424 33.6849 240.261 44.5515 300.44 82.6372C224.592 53.5359 59.8409 59.4502 22.688 89.3778C61.8098 73.8145 248.839 102.982 279.368 142.084C232.335 109.693 49.0079 123.682 20.1221 147.941C57.2131 132.178 252.802 157.562 275.461 202.292C242.329 178.056 52.5287 185.746 26.0628 206.139"
          stroke="white"
          transform="translate(58 160)"
          stroke-dasharray="1630"
          stroke-dashoffset="1630"
          stroke-width="60"></path>
        <defs>
          <clipPath id={scope("scribble-bounds")}>
            <rect x="30" y="0" width="245" height="300" rx="20"></rect>
          </clipPath>
        </defs>
      </g>
    </g>
    <rect
      data-target="my-whiteboard.eraser"
      x="52"
      y="480"
      fill="blue"
      width="50"
      height="70"
      rx="10"></rect>
    <defs>
      <filter
        id="filter0_dddd_222_3"
        x="0.704834"
        y="0.107422"
        width="783.747"
        height="969.61"
        filterUnits="userSpaceOnUse"
        color-interpolation-filters="sRGB"
      >
        <feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood>
        <feColorMatrix
          in="SourceAlpha"
          type="matrix"
          values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
          result="hardAlpha"></feColorMatrix>
        <feOffset dx="16" dy="16"></feOffset>
        <feGaussianBlur stdDeviation="25"></feGaussianBlur>
        <feColorMatrix
          type="matrix"
          values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"></feColorMatrix>
        <feBlend
          mode="normal"
          in2="BackgroundImageFix"
          result="effect1_dropShadow_222_3"></feBlend>
        <feColorMatrix
          in="SourceAlpha"
          type="matrix"
          values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
          result="hardAlpha"></feColorMatrix>
        <feOffset dx="62" dy="65"></feOffset>
        <feGaussianBlur stdDeviation="45"></feGaussianBlur>
        <feColorMatrix
          type="matrix"
          values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.09 0"></feColorMatrix>
        <feBlend
          mode="normal"
          in2="effect1_dropShadow_222_3"
          result="effect2_dropShadow_222_3"></feBlend>
        <feColorMatrix
          in="SourceAlpha"
          type="matrix"
          values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
          result="hardAlpha"></feColorMatrix>
        <feOffset dx="140" dy="147"></feOffset>
        <feGaussianBlur stdDeviation="61"></feGaussianBlur>
        <feColorMatrix
          type="matrix"
          values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.05 0"></feColorMatrix>
        <feBlend
          mode="normal"
          in2="effect2_dropShadow_222_3"
          result="effect3_dropShadow_222_3"></feBlend>
        <feColorMatrix
          in="SourceAlpha"
          type="matrix"
          values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
          result="hardAlpha"></feColorMatrix>
        <feOffset dx="249" dy="261"></feOffset>
        <feGaussianBlur stdDeviation="72"></feGaussianBlur>
        <feColorMatrix
          type="matrix"
          values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.01 0"></feColorMatrix>
        <feBlend
          mode="normal"
          in2="effect3_dropShadow_222_3"
          result="effect4_dropShadow_222_3"></feBlend>
        <feBlend
          mode="normal"
          in="SourceGraphic"
          in2="effect4_dropShadow_222_3"
          result="shape"></feBlend>
      </filter>
      <linearGradient
        id="paint0_linear_222_3"
        x1="231.838"
        y1="339.678"
        x2="352.319"
        y2="530.611"
        gradientUnits="userSpaceOnUse"
      >
        <stop stop-color="#F9FAFB"></stop>
        <stop offset="1" stop-color="#F9FAFB" stop-opacity="0.7"></stop>
      </linearGradient>
      <radialGradient
        id="paint1_radial_222_3"
        cx="0"
        cy="0"
        r="1"
        gradientUnits="userSpaceOnUse"
        gradientTransform="translate(101.192 99.5556) rotate(46.1711) scale(32.4772 21.3513)"
      >
        <stop stop-color="white"></stop>
        <stop offset="1" stop-color="#F9FAFB"></stop>
      </radialGradient>
      <linearGradient
        id="paint2_linear_222_3"
        x1="119.576"
        y1="574.191"
        x2="119.24"
        y2="588.886"
        gradientUnits="userSpaceOnUse"
      >
        <stop stop-color="#64748B"></stop>
        <stop offset="1" stop-color="#47576C"></stop>
      </linearGradient>
      <linearGradient
        id="paint3_linear_222_3"
        x1="224.576"
        y1="573.191"
        x2="224.24"
        y2="587.886"
        gradientUnits="userSpaceOnUse"
      >
        <stop stop-color="#64748B"></stop>
        <stop offset="1" stop-color="#47576C"></stop>
      </linearGradient>
      <linearGradient
        id="paint4_linear_222_3"
        x1="329.576"
        y1="573.191"
        x2="329.24"
        y2="587.886"
        gradientUnits="userSpaceOnUse"
      >
        <stop stop-color="#64748B"></stop>
        <stop offset="1" stop-color="#47576C"></stop>
      </linearGradient>
    </defs>
  </svg>
</div>

<style>
  [data-whiteboard-container] {
    animation-play-state: running;
    animation: float 4s ease-in-out infinite;
  }

  :global(my-whiteboard[data-drawing]) [data-whiteboard-container] {
    animation-play-state: paused;
  }

  canvas {
    width: calc(100% - var(--spacing-11) - var(--spacing-4));
    height: calc(100% - var(--spacing-11) * 2);
  }

  @keyframes float {
    0%,
    100% {
      translate: 0 0;
    }
    50% {
      translate: 0 10px;
    }
  }
</style>
